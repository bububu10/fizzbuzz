# FizzBuzzをOOPに忠実に実装する

---

## FizzBuzzとは？

---

Wikipediaを見ましょう。

Fizz Buzz(wikipedia) https://ja.wikipedia.org/wiki/Fizz_Buzz

---

実装するために、仕様化します。

---

* 連続した自然数の数列の各項を次のルールで変換し、その結果を半角スペース区切りでコンソールに出力する。
* プログラムに対する入力としては数列の初項と末項が与えられる。

---

* 変換ルール
  * 3で割り切れるなら「Fizz」と表示する
  * 5で割り切れるなら「Buzz」と表示する
  * 3と5の両方で割り切れるなら「FizzBuzz」と表示する。
  * いずれにも該当しない場合は、自然数をそのまま表示する。

---

実行結果の例

仮に、1から100までの連続した自然数の数列を処理すると

```text
1 2 Fizz 4 Buzz Fizz 7 8 Fizz Buzz 11 Fizz 13 14 FizzBuzz 16 17 Fizz 19 Buzz Fizz 22 23 Fizz Buzz 26 Fizz 28 29 FizzBuzz 31 32 Fizz 34 Buzz Fizz 37 38 Fizz Buzz 41 Fizz 43 44 FizzBuzz 46 47 Fizz 49 Buzz Fizz 52 53 Fizz Buzz 56 Fizz 58 59 FizzBuzz 61 62 Fizz 64 Buzz Fizz 67 68 Fizz Buzz 71 Fizz 73 74 FizzBuzz 76 77 Fizz 79 Buzz Fizz 82 83 Fizz Buzz 86 Fizz 88 89 FizzBuzz 91 92 Fizz 94 Buzz Fizz 97 98 Fizz Buzz
```

上記の結果が得られる。

--- 

## OOPとは？

---

オブジェクト指向プログラミング  
OOP(Object Oriented Programing)

---

* データとふるまいを持つ「オブジェクト」を組み合わせることによって、機能を実現する。
* オブジェクトはプログラムの「関心事」を表現し、「単一の責任」を果たす。

---

* 機能を実現するために「手続きを記述する」のではなく「関心事をオブジェクトモデル化する」という考え方をする。
* 「手続きを記述する」アプローチはTransaction Scriptと呼ばれる。気を抜くとこちらになりがち。

---

## 「仕様」「実装」とは？

---

* 仕様
  * プログラムが実現すべき機能。ふつう自然言語や図表によって記述される。
* 実装
  * 仕様を満たすプログラムそのもの、またはプログラムを記述する行為のこと。

---

今回はFizzBuzzという仕様を、Javaというプログラミング言語を使ってOOPアプローチで実装する。

---

## まずは手続き的に実装

---

コードを見てみる。

---

## オブジェクト指向に忠実に実装

---

具体的な指針  
オブジェクト指向エクササイズの9つのルール

---

すべてを厳格に適用する気はないが指針として次のルールを意識する。

---

* １つのメソッドにつきインデントは１段階までにすること
* else 句を使用しないこと
* すべてのプリミティブ型と文字列型をラップすること
* １行につきドットは１つまでにすること
* 名前を省略しないこと

（続く）

---

* すべてのエンティティを小さくすること
* １つのクラスにつきインスタンス変数は２つまでにすること
* ファーストクラスコレクションを使用すること
* Getter, Setter, プロパティを使用しないこと

ref. オブジェクト指向できていますか？(SlideShare) https://www.slideshare.net/MoriharuOhzu/ss-14083300

---

コードを見てみる。

---

## メリット/デメリット

---

メリット

---

* 本質的、重要な「関心事」がクラス名として明示化される。
* プログラム自身が英文として読み下しやすくなるので、プログラムから仕様を読み取るのが簡単になる。
  * ノンプログラマに対しても「コード見ればわかりますよ」と言えるのが理想。（現実的にはむつかしいけど）

---

* 1つ1つのクラスは独立性が高い（高凝縮、疎結合）ので、変更の影響範囲が見えやすい。
* 「仕様変更」への備え方、意識が変わる
  * ×「ここの仕様はきっと変わるだろうから、汎用的な仕組みとして作り込んでおこう」
  * ○「仕様変更は予測できないけど、どこが変わっても影響範囲は小さいから大丈夫」
  
---

* 影響範囲が見える＝修正コストが安いので、
  * 積極的にリファクタリング（コードの書き直し）が行える。
  * 「間違ったまま進んでｍあとでにっちもさっちもいかなくなる」ことを恐れなくなる。
  * 「間違えに気づいたらすぐにリファクタリングすればいいや」

---

デメリット

---

* 結構手間がかかる。
* Transaction ScriptからのOOPへのパラダイム転換に結構時間がかかる。

---
END
